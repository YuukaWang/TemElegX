\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{TemElegX}[2025/01/25 v1.00 an ēlēgit template for LaTeX]

\RequirePackage{keyval}
\newif\iffont
\fonttrue
\define@key{TemElegX}{font}[true]{%
  \csname font#1\endcsname
}
\newif\iffancyhdr
\fancyhdrtrue
\define@key{TemElegX}{fancyhdr}[true]{%
  \csname fancyhdr#1\endcsname
}
\newif\ifmath
\mathtrue
\define@key{TemElegX}{math}[true]{%
  \csname math#1\endcsname
}
\newif\ifphys
\phystrue
\define@key{TemElegX}{phys}[true]{%
  \csname phys#1\endcsname
}
\newif\ifchem
\chemtrue
\define@key{TemElegX}{chem}[true]{%
  \csname chem#1\endcsname
}
\newcommand{\TemElegXsetup}[1]{%
  \setkeys{TemElegX}{#1}%
}
\DeclareOption*{%
  \setkeys{TemElegX}{\CurrentOption}%
}
\ProcessOptions\relax

\RequirePackage[UTF8, fontset=none]{ctex}
\RequirePackage{amsmath, amssymb, amsfonts, amsthm}
\RequirePackage[no-math]{fontspec}
\RequirePackage{unicode-math, upgreek}
\RequirePackage{geometry, xcolor, bm}
\geometry{a4paper, top=3.2cm, inner=2.7cm, outer=3.2cm, bottom=3.1cm}
\raggedbottom
%cyan magenta yellow
%violet brown teal
%orange gray purple
\definecolor{tblue}{RGB}{92, 206, 250}
\definecolor{tpink}{RGB}{244, 169, 183}
%tpink tblue lime
\newcommand{\bacolor}{\colorbox}
\newcommand{\tecolor}{\textcolour}
\RequirePackage{graphicx}
\graphicspath{{../Pic/}{../figures/}{../images/}}
\RequirePackage{chemfig}
\RequirePackage{ulem}
\RequirePackage[version=4]{mhchem}
\RequirePackage{enumitem}
\RequirePackage{tabu, multirow, colortbl, makecell, booktabs, tabularx, arydshln} %table
\setlist{nosep}                                                   % 移除列表项之间的间距
\RequirePackage{siunitx}
\sisetup{detect-all, separate-uncertainty=true}
\iffancyhdr
  \RequirePackage{fancyhdr}
  \pagestyle{fancy}
  %\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
  %\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
  %\renewcommand{\subsectionmark}[1]{\markright{\thesubsection\ #1}}
  \fancyhf{}
  \fancyfoot[C]{\bfseries\thepage}
  \fancyhead[LO]{\bfseries\rightmark}
  \fancyhead[RE]{\bfseries\leftmark}
  \renewcommand{\headrulewidth}{0.4pt}
  \renewcommand{\footrulewidth}{0pt}
\else
\fi
\linespread{1.3}
\iffont
  \setmainfont{XITS}
  \setsansfont{Source Sans 3}
  \setmonofont{Iosevka Fixed Slab}[ItalicFont=霞鹜文楷等宽 GB Light]
  \setCJKmainfont{思源宋体 Light}[BoldFont=思源宋体 SemiBold, ItalicFont=霞鹜文楷 GB Light]
  \setCJKsansfont{思源黑体 Light}[BoldFont=思源黑体 Medium]
  \setCJKmonofont{等距更纱黑体 Slab SC}
  \setmathfont{XITS Math}
  \newfontfamily\gentium{Gentium Plus}
  \newfontfamily\genbook{Gentium Book Plus}
  \newfontfamily\sserif{Source Serif 4}
  \newfontfamily\ssans{Source Sans 3}
  \newfontfamily\cascadia{Cascadia Mono}
  \newCJKfontfamily\song{思源宋体 Light}[BoldFont=思源宋体 SemiBold]
  \newCJKfontfamily\xbs{思源宋体 ExtraLight} % 小标宋
  \newCJKfontfamily\bs{思源宋体} % 标宋
  \newCJKfontfamily\das{思源宋体 Medium} % 大宋
  \newCJKfontfamily\cus{思源宋体 Heavy} % 粗宋
  \newCJKfontfamily\hei{思源黑体 Light}[BoldFont=思源黑体 Medium]
  \newCJKfontfamily\xih{思源黑体 ExtraLight} % 细黑
  \newCJKfontfamily\bh{思源黑体 Normal} % 标黑
  \newCJKfontfamily\dah{思源黑体} % 大黑
  \newCJKfontfamily\cuh{思源黑体 Heavy} % 粗黑
  \newCJKfontfamily\xik{霞鹜文楷 GB Light} % 细楷
  \newCJKfontfamily\kai{霞鹜文楷 GB} % 楷体
  \newCJKfontfamily\cuk{霞鹜文楷 GB Medium} % 粗楷
  \newCJKfontfamily\fzfs{FZFangSong-Z02} % 仿宋  建议不用于PDF中
  \newCJKfontfamily\fzss{FZShuSong-Z01} % 书宋    因为方正此四字体嵌入后
  \newCJKfontfamily\fzkt{FZKai-Z03} % 楷体         商业使用需要得到方正授权
  %思源宋体ExtraLight Light 不填   Medium SemiBold Heavy
  %思源黑体ExtraLight Light Normal 不填   Medium   Heavy
  %霞鹜文楷           Light 不填   Medium
  %\newfontfamily\re{Source Serif 4 Light}[BoldFont=Source Serif 4 SemiBold]
  %\newfontfamily\co{Source Sans 3 Light}[BoldFont=Source Sans 3]
  \newCJKfontfamily\cre{霞鹜文楷 GB Light}[BoldFont=霞鹜文楷 GB Medium] %Chinese reference
  \newCJKfontfamily\cco{思源黑体 Light}[BoldFont=思源黑体] %Chinese concept
  \newfontfamily\lre{Source Serif 4 Light Italic}[BoldFont=Source Serif 4 Semibold Italic] %Latin reference
  \newfontfamily\lco{Source Sans 3 Light}[BoldFont=Source Sans 3] %Latin concept
  \newcommand{\re}[1]{{\cre\lre#1}}
  \newcommand{\co}[1]{{\cco\lco#1}}
\else
\fi

\newcommand{\subsubsubsection}[1]{\paragraph{#1}\mbox{}\\ }
\setcounter{secnumdepth}{4} %how many sectioning levels to assign numbers to
\setcounter{tocdepth}{4} %how many sectioning levels to show in ToC

\newcommand{\n}{\par}
\newcommand{\pic}[1][.8]{\includegraphics[width = #1\textwidth]}
\renewcommand{\figurename}{\textbf{Fig.}}
%\renewcommand{\underline}{\uline}

\ifmath
  \renewcommand{\log}[2][]{\ensuremath{   %        logarithm
    \ifx\relax#1\relax
      \ifx\relax#2\relax
        \mathrm{log}
      \else
        \mathrm{log}\left(#2\right)
      \fi
    \else
      \ifx\relax#2\relax
        \mathrm{log}_{#1}
      \else
        \mathrm{log}_{#1}\left(#2\right)
      \fi
    \fi
  }}
  \renewcommand{\ln}[1]{\ensuremath{      %natural logarithm
    \ifx\relax#1\relax
      \mathrm{ln}
    \else
      \mathrm{ln}\left(#1\right)
    \fi
  }}
  \renewcommand{\lg}[1]{\ensuremath{      %decimal logarithm
    \ifx\relax#1\relax
      \mathrm{lg}
    \else
      \mathrm{lg}\left(#1\right)
    \fi
  }}
  \newcommand{\lb}[1]{\ensuremath{        %binary  logarithm
    \ifx\relax#1\relax
      \mathrm{lb}
    \else
      \mathrm{lb}\left(#1\right)
    \fi
  }}

  \newcommand{\HH}{\ensuremath{\mathbb{H}}} %四元数
  \newcommand{\CC}{\ensuremath{\mathbb{C}}}
  \newcommand{\RR}{\ensuremath{\mathbb{R}}}
  \newcommand{\NN}{\ensuremath{\mathbb{N}}}
  \newcommand{\QQ}{\ensuremath{\mathbb{Q}}}
  \newcommand{\ZZ}{\ensuremath{\mathbb{Z}}}

  \newcommand{\dotlessi}{\i}
  \newcommand{\ii}{\ensuremath{\mathrm{i}}}
  \newcommand{\dotlessj}{\j}
  \newcommand{\jj}{\ensuremath{\mathrm{j}}}
  \newcommand{\mrm}{\mathrm}
  \newcommand{\ee}{\ensuremath{\mathrm{e}}}
  \newcommand{\circratio}{\ensuremath{ַ\symup{\pi}}}
  \newcommand{\ppi}{\ensuremath{ַ\symup{\pi}}}
  \newcommand{\diff}{\ensuremath{\mathrm{d}}}
  \newcommand{\deriv}[3][1]{
      \ifnum#1=1
          \frac{\diff #2}{\diff #3}
      \else
          \frac{\diff^{#1} #2}{\diff #3^{#1}}
      \fi
  }
  \newcommand{\pderiv}[3][1]{
      \ifnum#1=1
          \frac{\partial #2}{\partial #3}
      \else
          \frac{\partial^{#1} #2}{\partial #3^{#1}}
      \fi
  }
  \newcommand{\mpderiv}[5]{
    \ifnum#1=1
      \ifnum#2=1
        \frac{\partial #3}{\partial #4 \partial #5}
      \else
        \frac{\partial^{1+#2} #3}{\partial #4 \partial #5^{#2}}
      \fi
    \else
        \frac{\partial^{#1+#2} #3}{\partial #4^{#1} \partial #5^{#2}}
    \fi
  }
  \newcommand{\transpose}[1]{\ensuremath{#1^{\mathrm{T}}}}
  \newcommand{\abs}[1][\ ]{\ensuremath{\left\lvert #1 \right\rvert}}
  \mathchardef\mathdash="2D

  \newtheorem{Thm}{Theorem}[section] % 定理
  \newtheorem{Lem}{Lemma}[section] % 引理
  \newtheorem{Prop}{Proposition}[section] % 命题
  \newtheorem{Cor}{Corollary}[section] % 推论
  \newtheorem{Def}{Definition}[section] % 定义
  \newtheorem{Rmk}{Remark}[section] % 备注
  \newtheorem{Conj}{Conjecture}[section] % 猜想
  \newtheorem{Eg}{Example}[section] % 例子
  \newtheorem{Ex}{Exercise}[section] % 练习
  \newtheorem{Proof}{Proof}[section] % 证明
\else
\fi
\xeCJKsetup{CJKmath=true}